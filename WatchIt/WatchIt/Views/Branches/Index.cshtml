@model IEnumerable<WatchIt.Models.Branch>

@{
    ViewBag.Title = "Branches List";
}
<header>
    <h2 class="lists-header">@ViewBag.Title</h2>
</header>

@section scripts{

    <script type="text/javascript">

    $(document).ready(function () {
        $('#BranchName').autocomplete({
            source: '@Url.Action("GetBranchName")'
        });
    });

    $(document).ready(function () {
        $('#City').autocomplete({
            source: '@Url.Action("GetCity")'
        });
    });

    </script>
}

@{var sessionUser = (WatchIt.Models.Customer)HttpContext.Current.Session["Customer"];}
<div >
    @using (Html.BeginForm("Index", "Branches", FormMethod.Post))
    {
        <div style="align-content; padding-top:30px; padding-bottom:30px">
            <div class="col-md-10">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <font size="4">
                            <label>Search</label>
                        </font>
                        <br />
                        <ta align="center">
                            <label>Branch name: </label>
                            <input class="form-control" type="text" name="BranchName" id="BranchName" style="width:25%" /><br />
                            <label>City: </label>
                            <input class="form-control" type="text" name="City" id="City" style="width:25%"/><br />
                            <label>Phone number: </label>
                            <input class="form-control" type="text" name="Phone" id="Phone" style="width:25%"/><br />
                            <input type="submit" name="שלח" value="search" class="submit-btn btn btn-default" />
                        </ta>
                    </div>
                </div>
            </div>
        </div>

    }
</div>
@if (sessionUser != null && sessionUser.IsAdmin == true)
{
    <div>

        @Html.ActionLink("Create new branch", "Create")

    </div>
}
<br />
<table class="table" align="center">
    <tr>
        <th>
            <b>@Html.DisplayNameFor(model => model.BranchName)</b>
        </th>
        <th>
            <b>@Html.DisplayNameFor(model => model.BranchCity)</b>
        </th>
        <th>
            <b>@Html.DisplayNameFor(model => model.BranchStreet)</b>
        </th>
        <th>
            <b>@Html.DisplayNameFor(model => model.BranchsPhoneNumber)</b>
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.BranchName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.BranchCity)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.BranchStreet)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.BranchsPhoneNumber)
            </td>
            <td>
                @if (sessionUser != null && sessionUser.IsAdmin == true)
                {
                    @Html.ActionLink("Edit", "Edit", new { id = item.BranchID })<text> |</text>

                    @Html.ActionLink("Delete", "Delete", new { id = item.BranchID })<text> | </text>
                }

                @Html.ActionLink("Details", "Details", new { id = item.BranchID })

            </td>
        </tr>
    }

</table>
